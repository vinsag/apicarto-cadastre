<html>
<head>
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css" />

<style type="text/css">
html,body{
    width: 100%;
    height: 100%;
}
#map {
    height: 80%;
}
</style>

</head>
<body>
<div>
    <input id="code_dep" value="25" />
    <input id="code_com" value="349" />
</div>
<div id="map"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js"></script>
<script>
    var map = null ;

    var layerDivisions = null ;

    function initMap(){
        map = L.map('map').setView([45.505, 4.0], 6);

        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        layerDivisions = new L.geoJson();
        layerDivisions.addTo(map);
        loadDivisions();
    }

    function loadDivisions(){
        $.getJSON("/cadastre/division",{
            code_dep: $("#code_dep").val(),
            code_com: $("#code_com").val(),
        },function(data){
            $(data.features).each(function(key, data) {
                layerDivisions.addData(data);
            });
            map.fitBounds(layerDivisions.getBounds());
        });
    }

    $(document).ready(function(){
        initMap();
    });
</script>

</body>
</html>
